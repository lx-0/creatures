<div id="container">
  <div #creaturesCanvas id="creatures-canvas"></div>

  <div id="stats-container" *ngIf="statistics">
    # Creatures: {{ statistics.countCreatures }} (dead:
    {{ statistics.countDeadCreatures }}) <br />
    # Predators: {{ statistics.countPredatorCreatures }} <br />
    # Preys: {{ statistics.countPreyCreatures }} <br />
    Memory:
    {{ statistics.tfMemory / 1024 / 1024 | number : '1.0-1' }} MB<br />
    # Tensors: {{ statistics.tfTensors | number : '1.0-0' }}<br />
    # Buffers: {{ statistics.tfDataBuffers | number : '1.0-0' }}<br />
    <br /><br />

    <table
      mat-table
      [dataSource]="dataSource"
      matSort
      matSortActive="averageReward"
      matSortDirection="desc"
    >
      <ng-container matColumnDef="isPredator">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Cat</th>
        <td mat-cell *matCellDef="let creature">
          <span class="statistics-creatures-table--category">
            {{ creature.isPredator ? 'Pr' : 'Py' }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="generation">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>G</th>
        <td mat-cell *matCellDef="let creature">
          <span class="statistics-creatures-table--generation">
            {{ creature.generation }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="lifetime">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>LT</th>
        <td mat-cell *matCellDef="let creature">
          <span class="statistics-creatures-table--lifetime">
            {{ creature.lifetime | number : '1.0-0' }}s
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="health">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>H</th>
        <td mat-cell *matCellDef="let creature">
          <span class="statistics-creatures-table--health">
            {{ creature.health | number : '1.0-2' }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="energy">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>E</th>
        <td mat-cell *matCellDef="let creature">
          <span class="statistics-creatures-table--energy">
            {{ creature.energy | number : '1.0-0' }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="reproductionCooldown">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>R</th>
        <td mat-cell *matCellDef="let creature">
          <span class="statistics-creatures-table--reproduction">
            {{ creature.reproductionCooldown | number : '1.0-0' }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="speed">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>S</th>
        <td mat-cell *matCellDef="let creature">
          <span class="statistics-creatures-table--speed">
            {{ creature.speed | number : '1.0-0' }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="angle">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>A</th>
        <td mat-cell *matCellDef="let creature">
          <span class="statistics-creatures-table--angle">
            {{ creature.angle | number : '1.0-0' }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="trainings">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>T</th>
        <td mat-cell *matCellDef="let creature">
          <span class="statistics-creatures-table--trainings">
            {{ creature.trainings }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="averageReward">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>aR</th>
        <td mat-cell *matCellDef="let creature">
          <span
            class="statistics-creatures-table--averageReward"
            [matTooltip]="stringify(creature.currentRewards)"
          >
            {{ creature.averageReward | number : '1.0-2' }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="debug">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>D</th>
        <td mat-cell *matCellDef="let creature">
          <span class="statistics-creatures-table--debug">
            {{ creature.debug | number : '1.0-3' }}
          </span>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        *matRowDef="let creature; columns: displayedColumns"
        (click)="selectCreature(creature.id)"
        [class.selected]="selectedCreatureId === creature.id"
      ></tr>
    </table>
  </div>
</div>
<frontend-chart [lineChartData]="chartData"></frontend-chart>
